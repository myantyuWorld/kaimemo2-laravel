<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家計簿アプリ - 画面モック</title>
    <link href="https://cdn.jsdelivr.net/npm/vuetify@3.6.14/dist/vuetify.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        .chart-placeholder {
            height: 300px;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }
        .calendar-day {
            min-height: 80px;
            border: 1px solid #ddd;
            padding: 4px;
            cursor: pointer;
        }
        .calendar-day:hover {
            background-color: #f0f0f0;
        }
        .expense-amount {
            font-size: 0.8em;
            color: #d32f2f;
            font-weight: bold;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background-color: #ddd;
        }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <v-app>
            <!-- SCR008: ログイン画面 -->
            <div v-if="currentScreen === 'login'">
                <v-container class="fill-height" fluid>
                    <v-row align="center" justify="center">
                        <v-col cols="12" sm="8" md="4">
                            <v-card class="elevation-12">
                                <v-card-title class="text-h4 justify-center">
                                    <v-icon size="large" class="mr-2">mdi-calculator</v-icon>
                                    家計簿アプリ
                                </v-card-title>
                                <v-card-text>
                                    <v-form>
                                        <v-text-field
                                            v-model="loginForm.email"
                                            label="メールアドレス"
                                            type="email"
                                            prepend-icon="mdi-email"
                                            required
                                        ></v-text-field>
                                        <v-text-field
                                            v-model="loginForm.password"
                                            label="パスワード"
                                            type="password"
                                            prepend-icon="mdi-lock"
                                            required
                                        ></v-text-field>
                                    </v-form>
                                </v-card-text>
                                <v-card-actions>
                                    <v-spacer></v-spacer>
                                    <v-btn color="primary" @click="login">ログイン</v-btn>
                                </v-card-actions>
                            </v-card>
                        </v-col>
                    </v-row>
                </v-container>
            </div>

            <!-- 共通ヘッダー -->
            <v-app-bar v-if="currentScreen !== 'login'" color="primary" dark>
                <v-app-bar-nav-icon @click="drawer = !drawer">
                    <v-icon>mdi-menu</v-icon>
                </v-app-bar-nav-icon>
                <v-toolbar-title>{{ screenTitles[currentScreen] }}</v-toolbar-title>
                <v-spacer></v-spacer>
                <v-menu>
                    <template v-slot:activator="{ props }">
                        <v-btn icon v-bind="props">
                            <v-icon>mdi-account</v-icon>
                        </v-btn>
                    </template>
                    <v-list>
                        <v-list-item @click="currentScreen = 'userManagement'">
                            <v-list-item-title>ユーザー管理</v-list-item-title>
                        </v-list-item>
                        <v-list-item @click="logout">
                            <v-list-item-title>ログアウト</v-list-item-title>
                        </v-list-item>
                    </v-list>
                </v-menu>
            </v-app-bar>

            <!-- ハンバーガーメニュー -->
            <v-navigation-drawer
                v-if="currentScreen !== 'login'"
                v-model="drawer"
                temporary
            >
                <v-list>
                    <v-list-item
                        prepend-icon="mdi-view-dashboard"
                        title="ダッシュボード"
                        @click="navigateTo('dashboard')"
                    ></v-list-item>
                    <v-list-item
                        prepend-icon="mdi-plus-circle"
                        title="支出入力"
                        @click="navigateTo('expenseInput')"
                    ></v-list-item>
                    <v-list-item
                        prepend-icon="mdi-calendar"
                        title="カレンダー"
                        @click="navigateTo('calendar')"
                    ></v-list-item>
                    <v-list-item
                        prepend-icon="mdi-format-list-bulleted"
                        title="支出一覧"
                        @click="navigateTo('expenseList')"
                    ></v-list-item>
                    <v-list-item
                        prepend-icon="mdi-wallet"
                        title="予算管理"
                        @click="navigateTo('budgetManagement')"
                    ></v-list-item>
                    <v-list-item
                        prepend-icon="mdi-cart"
                        title="買い物メモ"
                        @click="navigateTo('shoppingMemo')"
                    ></v-list-item>
                    <v-list-item
                        prepend-icon="mdi-chart-line"
                        title="集計"
                        @click="navigateTo('statistics')"
                    ></v-list-item>
                    <v-divider></v-divider>
                    <v-list-item
                        prepend-icon="mdi-account-group"
                        title="ユーザー管理"
                        @click="navigateTo('userManagement')"
                    ></v-list-item>
                </v-list>
            </v-navigation-drawer>

            <v-main v-if="currentScreen !== 'login'">
                <!-- SCR001: メイン画面（ダッシュボード） -->
                <div v-if="currentScreen === 'dashboard'">
                    <v-container>
                        <!-- カレンダー表示（メインコンテンツ） -->
                        <v-row>
                            <v-col cols="12">
                                <v-card>
                                    <v-card-title>
                                        <v-icon class="mr-2">mdi-calendar</v-icon>
                                        {{ currentYear }}年{{ currentMonth }}月の支出
                                        <v-spacer></v-spacer>
                                        <v-btn icon @click="previousMonth">
                                            <v-icon>mdi-chevron-left</v-icon>
                                        </v-btn>
                                        <v-btn icon @click="nextMonth">
                                            <v-icon>mdi-chevron-right</v-icon>
                                        </v-btn>
                                    </v-card-title>
                                    <v-card-text>
                                        <!-- 曜日ヘッダー -->
                                        <div class="calendar-grid" style="margin-bottom: 1px;">
                                            <div v-for="day in dayHeaders" :key="day" class="text-center py-2 font-weight-bold">
                                                {{ day }}
                                            </div>
                                        </div>
                                        <!-- カレンダーグリッド -->
                                        <div class="calendar-grid">
                                            <div 
                                                v-for="day in calendarDays" 
                                                :key="day.date" 
                                                class="calendar-day"
                                                :class="{ 'text--disabled': !day.isCurrentMonth }"
                                                @click="selectDay(day)"
                                            >
                                                <div class="text-right mb-1">{{ day.day }}</div>
                                                <div v-if="day.expenses > 0" class="expense-amount text-center">
                                                    ¥{{ day.expenses.toLocaleString() }}
                                                </div>
                                            </div>
                                        </div>
                                    </v-card-text>
                                    <v-card-actions>
                                        <v-btn color="primary" @click="currentScreen = 'expenseInput'">
                                            <v-icon class="mr-2">mdi-plus</v-icon>
                                            支出を追加
                                        </v-btn>
                                        <v-btn color="secondary" @click="currentScreen = 'calendar'">
                                            <v-icon class="mr-2">mdi-calendar</v-icon>
                                            カレンダー詳細
                                        </v-btn>
                                    </v-card-actions>
                                </v-card>
                            </v-col>
                        </v-row>

                        <!-- 今日の支出概要 -->
                        <v-row class="mt-4">
                            <v-col cols="12">
                                <v-card>
                                    <v-card-title>
                                        <v-icon class="mr-2">mdi-view-dashboard</v-icon>
                                        今日の支出 ({{ today }})
                                    </v-card-title>
                                    <v-card-text>
                                        <v-list v-if="todayExpenses.length > 0">
                                            <v-list-item v-for="expense in todayExpenses" :key="expense.id">
                                                <v-list-item-content>
                                                    <v-list-item-title>{{ expense.item }}</v-list-item-title>
                                                    <v-list-item-subtitle>{{ expense.category }}</v-list-item-subtitle>
                                                </v-list-item-content>
                                                <v-list-item-action>
                                                    <v-chip color="error">¥{{ expense.amount.toLocaleString() }}</v-chip>
                                                </v-list-item-action>
                                            </v-list-item>
                                        </v-list>
                                        <div v-else class="text-center text--disabled py-4">
                                            今日の支出はありません
                                        </div>
                                        <v-divider class="my-4"></v-divider>
                                        <div class="text-h6 text-right">
                                            今日の合計: ¥{{ todayTotal.toLocaleString() }}
                                        </div>
                                    </v-card-text>
                                </v-card>
                            </v-col>
                        </v-row>

                        <v-row class="mt-4">
                            <v-col cols="12" md="6">
                                <v-card>
                                    <v-card-title>
                                        <v-icon class="mr-2">mdi-wallet</v-icon>
                                        予算残額
                                    </v-card-title>
                                    <v-card-text>
                                        <div v-for="budget in budgets" :key="budget.category" class="mb-3">
                                            <div class="d-flex justify-space-between align-center">
                                                <span>{{ budget.category }}</span>
                                                <span>¥{{ budget.remaining.toLocaleString() }} / ¥{{ budget.total.toLocaleString() }}</span>
                                            </div>
                                            <v-progress-linear
                                                :value="(budget.total - budget.remaining) / budget.total * 100"
                                                :color="budget.remaining < budget.total * 0.2 ? 'error' : 'primary'"
                                                height="20"
                                                class="mt-1"
                                            ></v-progress-linear>
                                        </div>
                                    </v-card-text>
                                    <v-card-actions>
                                        <v-btn color="primary" @click="currentScreen = 'budgetManagement'">
                                            予算管理
                                        </v-btn>
                                    </v-card-actions>
                                </v-card>
                            </v-col>
                            <v-col cols="12" md="6">
                                <v-card>
                                    <v-card-title>
                                        <v-icon class="mr-2">mdi-cart</v-icon>
                                        買い物メモ
                                    </v-card-title>
                                    <v-card-text>
                                        <v-list>
                                            <v-list-item v-for="item in shoppingList.slice(0, 3)" :key="item.id">
                                                <v-list-item-content>
                                                    <v-list-item-title :class="{ 'text-decoration-line-through': item.completed }">
                                                        {{ item.name }}
                                                    </v-list-item-title>
                                                </v-list-item-content>
                                                <v-list-item-action>
                                                    <v-checkbox v-model="item.completed"></v-checkbox>
                                                </v-list-item-action>
                                            </v-list-item>
                                        </v-list>
                                        <div v-if="shoppingList.length > 3" class="text-center">
                                            他 {{ shoppingList.length - 3 }} 件
                                        </div>
                                    </v-card-text>
                                    <v-card-actions>
                                        <v-btn color="primary" @click="currentScreen = 'shoppingMemo'">
                                            買い物メモ
                                        </v-btn>
                                    </v-card-actions>
                                </v-card>
                            </v-col>
                        </v-row>

                        <v-row class="mt-4">
                            <v-col cols="12">
                                <v-card>
                                    <v-card-title>
                                        <v-icon class="mr-2">mdi-chart-line</v-icon>
                                        今週の支出サマリー
                                    </v-card-title>
                                    <v-card-text>
                                        <div class="chart-placeholder">
                                            <span>支出グラフ (¥{{ weeklyTotal.toLocaleString() }})</span>
                                        </div>
                                    </v-card-text>
                                    <v-card-actions>
                                        <v-btn color="primary" @click="currentScreen = 'statistics'">
                                            詳細な集計
                                        </v-btn>
                                    </v-card-actions>
                                </v-card>
                            </v-col>
                        </v-row>
                    </v-container>
                </div>

                <!-- SCR002: 支出入力画面 -->
                <div v-if="currentScreen === 'expenseInput'">
                    <v-container>
                        <v-card>
                            <v-card-title>
                                <v-icon class="mr-2">mdi-plus-circle</v-icon>
                                支出を追加
                            </v-card-title>
                            <v-card-text>
                                <v-form>
                                    <v-row>
                                        <v-col cols="12">
                                            <v-text-field
                                                v-model="expenseForm.date"
                                                label="日付"
                                                type="date"
                                                required
                                            ></v-text-field>
                                        </v-col>
                                        <v-col cols="12">
                                            <v-subheader>カテゴリ別金額入力</v-subheader>
                                            <div v-for="category in ['食費', '日用品', 'お小遣い']" :key="category" class="mb-3">
                                                <v-text-field
                                                    v-model="expenseForm.categoryAmounts[category]"
                                                    :label="category + ' (¥)'"
                                                    type="number"
                                                    prefix="¥"
                                                    min="0"
                                                ></v-text-field>
                                            </div>
                                        </v-col>
                                        <v-col cols="12">
                                            <v-textarea
                                                v-model="expenseForm.memo"
                                                label="メモ（任意）"
                                                rows="2"
                                                placeholder="例：宅飲みがあった、BBQをしたなど"
                                            ></v-textarea>
                                        </v-col>
                                    </v-row>
                                </v-form>
                            </v-card-text>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn color="primary" @click="addExpense">
                                    追加
                                </v-btn>
                                <v-btn @click="currentScreen = 'dashboard'">
                                    キャンセル
                                </v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-container>
                </div>

                <!-- SCR003: カレンダー画面 -->
                <div v-if="currentScreen === 'calendar'">
                    <v-container>
                        <v-card>
                            <v-card-title>
                                <v-icon class="mr-2">mdi-calendar</v-icon>
                                {{ currentYear }}年{{ currentMonth }}月
                                <v-spacer></v-spacer>
                                <v-btn icon @click="previousMonth">
                                    <v-icon>mdi-chevron-left</v-icon>
                                </v-btn>
                                <v-btn icon @click="nextMonth">
                                    <v-icon>mdi-chevron-right</v-icon>
                                </v-btn>
                            </v-card-title>
                            <v-card-text>
                                <!-- 曜日ヘッダー -->
                                <div class="calendar-grid" style="margin-bottom: 1px;">
                                    <div v-for="day in dayHeaders" :key="day" class="text-center py-2 font-weight-bold">
                                        {{ day }}
                                    </div>
                                </div>
                                <!-- カレンダーグリッド -->
                                <div class="calendar-grid">
                                    <div 
                                        v-for="day in calendarDays" 
                                        :key="day.date" 
                                        class="calendar-day"
                                        :class="{ 'text--disabled': !day.isCurrentMonth }"
                                        @click="selectDay(day)"
                                    >
                                        <div class="text-right mb-1">{{ day.day }}</div>
                                        <div v-if="day.expenses > 0" class="expense-amount text-center">
                                            ¥{{ day.expenses.toLocaleString() }}
                                        </div>
                                    </div>
                                </div>
                            </v-card-text>
                        </v-card>

                        <!-- 選択日の支出詳細 -->
                        <v-card v-if="selectedDay" class="mt-4">
                            <v-card-title>
                                <v-icon class="mr-2">mdi-format-list-bulleted</v-icon>
                                {{ selectedDay.date }} の支出内訳
                            </v-card-title>
                            <v-card-text>
                                <!-- カテゴリ別支出表示 -->
                                <div v-for="category in categories" :key="category" class="mb-3">
                                    <div v-if="getExpensesByDateAndCategory(selectedDay.date, category).length > 0">
                                        <v-subheader>{{ category }}</v-subheader>
                                        <v-list>
                                            <v-list-item 
                                                v-for="expense in getExpensesByDateAndCategory(selectedDay.date, category)" 
                                                :key="expense.id"
                                            >
                                                <v-list-item-content>
                                                    <v-list-item-title>{{ expense.item }}</v-list-item-title>
                                                </v-list-item-content>
                                                <v-list-item-action>
                                                    <v-chip color="error">¥{{ expense.amount.toLocaleString() }}</v-chip>
                                                </v-list-item-action>
                                            </v-list-item>
                                        </v-list>
                                        <div class="text-right font-weight-bold mb-2">
                                            {{ category }}小計: ¥{{ getCategoryTotal(selectedDay.date, category).toLocaleString() }}
                                        </div>
                                    </div>
                                </div>
                                <v-divider class="my-4"></v-divider>
                                <div class="text-h6 text-right">
                                    {{ selectedDay.date }} 合計: ¥{{ getDayTotal(selectedDay.date).toLocaleString() }}
                                </div>
                            </v-card-text>
                        </v-card>
                    </v-container>
                </div>

                <!-- SCR004: 支出一覧画面 -->
                <div v-if="currentScreen === 'expenseList'">
                    <v-container>
                        <v-card>
                            <v-card-title>
                                <v-icon class="mr-2">mdi-format-list-bulleted</v-icon>
                                支出一覧
                            </v-card-title>
                            <v-card-text>
                                <v-row class="mb-4">
                                    <v-col cols="12" md="4">
                                        <v-text-field
                                            v-model="expenseFilter.date"
                                            label="日付"
                                            type="date"
                                        ></v-text-field>
                                    </v-col>
                                    <v-col cols="12" md="4">
                                        <v-select
                                            v-model="expenseFilter.category"
                                            :items="['全て', ...categories]"
                                            label="カテゴリ"
                                        ></v-select>
                                    </v-col>
                                </v-row>
                                <v-data-table
                                    :headers="expenseHeaders"
                                    :items="allExpenses"
                                    :items-per-page="10"
                                >
                                    <template v-slot:item.amount="{ item }">
                                        ¥{{ item.amount.toLocaleString() }}
                                    </template>
                                    <template v-slot:item.actions="{ item }">
                                        <v-btn icon size="small" color="error">
                                            <v-icon>mdi-delete</v-icon>
                                        </v-btn>
                                    </template>
                                </v-data-table>
                            </v-card-text>
                        </v-card>
                    </v-container>
                </div>

                <!-- SCR005: 予算管理画面 -->
                <div v-if="currentScreen === 'budgetManagement'">
                    <v-container>
                        <v-card>
                            <v-card-title>
                                <v-icon class="mr-2">mdi-wallet</v-icon>
                                予算管理
                            </v-card-title>
                            <v-card-text>
                                <v-row>
                                    <v-col cols="12" md="6" v-for="budget in budgets" :key="budget.category">
                                        <v-card outlined>
                                            <v-card-title>{{ budget.category }}</v-card-title>
                                            <v-card-text>
                                                <v-text-field
                                                    :value="budget.total"
                                                    label="予算上限"
                                                    type="number"
                                                    prefix="¥"
                                                ></v-text-field>
                                                <div class="mb-2">
                                                    使用済み: ¥{{ (budget.total - budget.remaining).toLocaleString() }}
                                                </div>
                                                <div class="mb-2">
                                                    残額: ¥{{ budget.remaining.toLocaleString() }}
                                                </div>
                                                <v-progress-linear
                                                    :value="(budget.total - budget.remaining) / budget.total * 100"
                                                    :color="budget.remaining < budget.total * 0.2 ? 'error' : 'primary'"
                                                    height="20"
                                                ></v-progress-linear>
                                            </v-card-text>
                                        </v-card>
                                    </v-col>
                                </v-row>
                            </v-card-text>
                            <v-card-actions>
                                <v-btn color="primary">
                                    予算を更新
                                </v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-container>
                </div>

                <!-- SCR006: 買い物メモ画面 -->
                <div v-if="currentScreen === 'shoppingMemo'">
                    <v-container>
                        <v-card>
                            <v-card-title>
                                <v-icon class="mr-2">mdi-cart</v-icon>
                                買い物メモ
                            </v-card-title>
                            <v-card-text>
                                <v-row class="mb-4">
                                    <v-col cols="12" md="8">
                                        <v-text-field
                                            v-model="newShoppingItem"
                                            label="アイテムを追加"
                                            @keyup.enter="addShoppingItem"
                                        ></v-text-field>
                                    </v-col>
                                    <v-col cols="12" md="4">
                                        <v-btn color="primary" @click="addShoppingItem">
                                            <v-icon class="mr-2">mdi-plus</v-icon>
                                            追加
                                        </v-btn>
                                    </v-col>
                                </v-row>
                                <v-list>
                                    <v-list-item v-for="item in shoppingList" :key="item.id">
                                        <v-list-item-content>
                                            <v-list-item-title :class="{ 'text-decoration-line-through': item.completed }">
                                                {{ item.name }}
                                            </v-list-item-title>
                                        </v-list-item-content>
                                        <v-list-item-action>
                                            <v-checkbox v-model="item.completed"></v-checkbox>
                                        </v-list-item-action>
                                        <v-list-item-action>
                                            <v-btn icon size="small" color="error">
                                                <v-icon>mdi-delete</v-icon>
                                            </v-btn>
                                        </v-list-item-action>
                                    </v-list-item>
                                </v-list>
                                <v-divider class="my-4"></v-divider>
                                <v-card outlined>
                                    <v-card-title>共有メンバー</v-card-title>
                                    <v-card-text>
                                        <v-chip-group>
                                            <v-chip v-for="member in sharedMembers" :key="member.id" close>
                                                {{ member.name }}
                                            </v-chip>
                                        </v-chip-group>
                                        <v-text-field
                                            v-model="newMemberEmail"
                                            label="メンバーを招待（メールアドレス）"
                                            class="mt-2"
                                        ></v-text-field>
                                        <v-btn color="secondary" @click="inviteMember">
                                            招待
                                        </v-btn>
                                    </v-card-text>
                                </v-card>
                            </v-card-text>
                        </v-card>
                    </v-container>
                </div>

                <!-- SCR007: 集計画面 -->
                <div v-if="currentScreen === 'statistics'">
                    <v-container>
                        <v-card>
                            <v-card-title>
                                <v-icon class="mr-2">mdi-chart-line</v-icon>
                                支出集計
                            </v-card-title>
                            <v-card-text>
                                <v-row class="mb-4">
                                    <v-col cols="12" md="4">
                                        <v-text-field
                                            v-model="statisticsFilter.startDate"
                                            label="開始日"
                                            type="date"
                                        ></v-text-field>
                                    </v-col>
                                    <v-col cols="12" md="4">
                                        <v-text-field
                                            v-model="statisticsFilter.endDate"
                                            label="終了日"
                                            type="date"
                                        ></v-text-field>
                                    </v-col>
                                    <v-col cols="12" md="4">
                                        <v-select
                                            v-model="statisticsFilter.period"
                                            :items="['週間', '月間', '年間']"
                                            label="集計期間"
                                        ></v-select>
                                    </v-col>
                                </v-row>

                                <v-row>
                                    <v-col cols="12" md="6">
                                        <v-card outlined>
                                            <v-card-title>カテゴリ別支出</v-card-title>
                                            <v-card-text>
                                                <div class="chart-placeholder">
                                                    円グラフ（カテゴリ別）
                                                </div>
                                            </v-card-text>
                                        </v-card>
                                    </v-col>
                                    <v-col cols="12" md="6">
                                        <v-card outlined>
                                            <v-card-title>期間別支出推移</v-card-title>
                                            <v-card-text>
                                                <div class="chart-placeholder">
                                                    線グラフ（時系列）
                                                </div>
                                            </v-card-text>
                                        </v-card>
                                    </v-col>
                                </v-row>

                                <v-row class="mt-4">
                                    <v-col cols="12">
                                        <v-card outlined>
                                            <v-card-title>サマリー</v-card-title>
                                            <v-card-text>
                                                <v-row>
                                                    <v-col cols="12" md="3">
                                                        <v-card color="primary" dark>
                                                            <v-card-text>
                                                                <div class="text-h4">¥{{ weeklyTotal.toLocaleString() }}</div>
                                                                <div>今週の支出</div>
                                                            </v-card-text>
                                                        </v-card>
                                                    </v-col>
                                                    <v-col cols="12" md="3">
                                                        <v-card color="secondary" dark>
                                                            <v-card-text>
                                                                <div class="text-h4">¥{{ monthlyTotal.toLocaleString() }}</div>
                                                                <div>今月の支出</div>
                                                            </v-card-text>
                                                        </v-card>
                                                    </v-col>
                                                    <v-col cols="12" md="3">
                                                        <v-card color="success" dark>
                                                            <v-card-text>
                                                                <div class="text-h4">¥{{ averageDaily.toLocaleString() }}</div>
                                                                <div>1日平均</div>
                                                            </v-card-text>
                                                        </v-card>
                                                    </v-col>
                                                    <v-col cols="12" md="3">
                                                        <v-card color="warning" dark>
                                                            <v-card-text>
                                                                <div class="text-h4">{{ budgetUsageRate }}%</div>
                                                                <div>予算使用率</div>
                                                            </v-card-text>
                                                        </v-card>
                                                    </v-col>
                                                </v-row>
                                            </v-card-text>
                                        </v-card>
                                    </v-col>
                                </v-row>
                            </v-card-text>
                        </v-card>
                    </v-container>
                </div>

                <!-- SCR009: ユーザー管理画面 -->
                <div v-if="currentScreen === 'userManagement'">
                    <v-container>
                        <v-card>
                            <v-card-title>
                                <v-icon class="mr-2">mdi-account-group</v-icon>
                                ユーザー管理
                            </v-card-title>
                            <v-card-text>
                                <v-btn color="primary" class="mb-4">
                                    <v-icon class="mr-2">mdi-plus</v-icon>
                                    新しいメンバーを追加
                                </v-btn>
                                <v-data-table
                                    :headers="userHeaders"
                                    :items="familyMembers"
                                    :items-per-page="10"
                                >
                                    <template v-slot:item.role="{ item }">
                                        <v-chip :color="item.role === '管理者' ? 'primary' : 'secondary'">
                                            {{ item.role }}
                                        </v-chip>
                                    </template>
                                    <template v-slot:item.actions="{ item }">
                                        <v-btn icon size="small" color="primary">
                                            <v-icon>mdi-pencil</v-icon>
                                        </v-btn>
                                        <v-btn icon size="small" color="error" v-if="item.role !== '管理者'">
                                            <v-icon>mdi-delete</v-icon>
                                        </v-btn>
                                    </template>
                                </v-data-table>
                            </v-card-text>
                        </v-card>
                    </v-container>
                </div>
            </v-main>
        </v-app>
    </div>

    <script src="https://unpkg.com/vue@3.4.37/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@3.6.14/dist/vuetify.min.js"></script>
    <script>
        const { createApp } = Vue;
        const { createVuetify } = Vuetify;

        const vuetify = createVuetify();

        createApp({
            data() {
                return {
                    currentScreen: 'login',
                    drawer: false,
                    today: new Date().toISOString().substr(0, 10),
                    currentYear: new Date().getFullYear(),
                    currentMonth: new Date().getMonth() + 1,
                    currentDate: new Date(),
                    selectedDay: null,
                    dayHeaders: ['日', '月', '火', '水', '木', '金', '土'],
                    
                    // ログイン関連
                    loginForm: {
                        email: 'user@example.com',
                        password: ''
                    },
                    
                    // 画面タイトル
                    screenTitles: {
                        dashboard: 'ダッシュボード',
                        expenseInput: '支出入力',
                        calendar: 'カレンダー',
                        expenseList: '支出一覧',
                        budgetManagement: '予算管理',
                        shoppingMemo: '買い物メモ',
                        statistics: '集計',
                        userManagement: 'ユーザー管理'
                    },
                    
                    // 支出関連データ
                    todayExpenses: [
                        { id: 1, item: '牛乳', amount: 180, category: '食費' },
                        { id: 2, item: 'パン', amount: 120, category: '食費' },
                        { id: 3, item: 'ガソリン', amount: 3500, category: 'その他' }
                    ],
                    
                    allExpenses: [
                        { id: 1, date: '2024-01-15', item: '牛乳', amount: 180, category: '食費' },
                        { id: 2, date: '2024-01-15', item: 'パン', amount: 120, category: '食費' },
                        { id: 3, date: '2024-01-15', item: 'ガソリン', amount: 3500, category: 'その他' },
                        { id: 4, date: '2024-01-14', item: 'お米', amount: 2800, category: '食費' },
                        { id: 5, date: '2024-01-14', item: '映画チケット', amount: 1800, category: 'お小遣い' },
                        { id: 6, date: '2024-01-13', item: 'コーヒー', amount: 350, category: '食費' },
                        { id: 7, date: '2024-01-13', item: '洗剤', amount: 480, category: '日用品' },
                        { id: 8, date: '2024-01-12', item: 'ランチ', amount: 800, category: 'お小遣い' },
                        { id: 9, date: '2024-01-11', item: 'シャンプー', amount: 650, category: '日用品' }
                    ],
                    
                    expenseHeaders: [
                        { title: '日付', key: 'date' },
                        { title: '品目', key: 'item' },
                        { title: 'カテゴリ', key: 'category' },
                        { title: '金額', key: 'amount' },
                        { title: '操作', key: 'actions', sortable: false }
                    ],
                    
                    expenseForm: {
                        date: new Date().toISOString().substr(0, 10),
                        categoryAmounts: {
                            '食費': '',
                            '日用品': '',
                            'お小遣い': ''
                        },
                        memo: ''
                    },
                    
                    expenseFilter: {
                        date: '',
                        category: '全て'
                    },
                    
                    categories: ['食費', '日用品', 'お小遣い', 'その他'],
                    
                    // 予算関連データ
                    budgets: [
                        { category: '食費', total: 50000, remaining: 32200 },
                        { category: '日用品', total: 10000, remaining: 8500 },
                        { category: 'お小遣い', total: 15000, remaining: 12000 }
                    ],
                    
                    // 買い物メモ関連データ
                    shoppingList: [
                        { id: 1, name: '牛乳', completed: false },
                        { id: 2, name: '卵', completed: true },
                        { id: 3, name: 'パン', completed: false },
                        { id: 4, name: 'りんご', completed: false },
                        { id: 5, name: '洗剤', completed: true }
                    ],
                    
                    newShoppingItem: '',
                    
                    sharedMembers: [
                        { id: 1, name: '田中太郎' },
                        { id: 2, name: '田中花子' },
                        { id: 3, name: '田中次郎' }
                    ],
                    
                    newMemberEmail: '',
                    
                    // 集計関連データ
                    weeklyTotal: 15280,
                    monthlyTotal: 127450,
                    averageDaily: 4248,
                    budgetUsageRate: 67,
                    
                    statisticsFilter: {
                        startDate: '',
                        endDate: '',
                        period: '週間'
                    },
                    
                    // ユーザー管理関連データ
                    familyMembers: [
                        { id: 1, name: '田中太郎', email: 'taro@example.com', role: '管理者' },
                        { id: 2, name: '田中花子', email: 'hanako@example.com', role: 'メンバー' },
                        { id: 3, name: '田中次郎', email: 'jiro@example.com', role: 'メンバー' }
                    ],
                    
                    userHeaders: [
                        { title: '名前', key: 'name' },
                        { title: 'メールアドレス', key: 'email' },
                        { title: '権限', key: 'role' },
                        { title: '操作', key: 'actions', sortable: false }
                    ]
                };
            },
            computed: {
                todayTotal() {
                    return this.todayExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                },
                calendarDays() {
                    const firstDay = new Date(this.currentYear, this.currentMonth - 1, 1);
                    const lastDay = new Date(this.currentYear, this.currentMonth, 0);
                    const startDate = new Date(firstDay);
                    startDate.setDate(startDate.getDate() - firstDay.getDay());
                    
                    const days = [];
                    for (let i = 0; i < 42; i++) {
                        const date = new Date(startDate);
                        date.setDate(startDate.getDate() + i);
                        
                        const dateString = date.toISOString().substr(0, 10);
                        const dayExpenses = this.allExpenses
                            .filter(expense => expense.date === dateString)
                            .reduce((sum, expense) => sum + expense.amount, 0);
                        
                        days.push({
                            date: dateString,
                            day: date.getDate(),
                            isCurrentMonth: date.getMonth() === this.currentMonth - 1,
                            expenses: dayExpenses
                        });
                    }
                    return days;
                }
            },
            methods: {
                login() {
                    this.currentScreen = 'dashboard';
                },
                logout() {
                    this.currentScreen = 'login';
                },
                navigateTo(screen) {
                    this.currentScreen = screen;
                    this.drawer = false;
                },
                addExpense() {
                    alert('支出が追加されました');
                    this.currentScreen = 'dashboard';
                },
                addShoppingItem() {
                    if (this.newShoppingItem.trim()) {
                        this.shoppingList.push({
                            id: Date.now(),
                            name: this.newShoppingItem,
                            completed: false
                        });
                        this.newShoppingItem = '';
                    }
                },
                inviteMember() {
                    if (this.newMemberEmail.trim()) {
                        alert(`${this.newMemberEmail} に招待を送信しました`);
                        this.newMemberEmail = '';
                    }
                },
                previousMonth() {
                    if (this.currentMonth === 1) {
                        this.currentMonth = 12;
                        this.currentYear--;
                    } else {
                        this.currentMonth--;
                    }
                    this.selectedDay = null;
                },
                nextMonth() {
                    if (this.currentMonth === 12) {
                        this.currentMonth = 1;
                        this.currentYear++;
                    } else {
                        this.currentMonth++;
                    }
                    this.selectedDay = null;
                },
                selectDay(day) {
                    if (day.isCurrentMonth) {
                        this.selectedDay = day;
                        if (this.currentScreen === 'dashboard') {
                            this.currentScreen = 'calendar';
                        }
                    }
                },
                getExpensesByDateAndCategory(date, category) {
                    return this.allExpenses.filter(expense => 
                        expense.date === date && expense.category === category
                    );
                },
                getCategoryTotal(date, category) {
                    return this.getExpensesByDateAndCategory(date, category)
                        .reduce((sum, expense) => sum + expense.amount, 0);
                },
                getDayTotal(date) {
                    return this.allExpenses
                        .filter(expense => expense.date === date)
                        .reduce((sum, expense) => sum + expense.amount, 0);
                }
            }
        }).use(vuetify).mount('#app');
    </script>
</body>
</html>