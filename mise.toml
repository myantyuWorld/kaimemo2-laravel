[tools]
lefthook = "latest"
node = "20"

[tasks.setup]
description = "Full project setup"
run = "cd backend && composer run setup"

[tasks.dev]
description = "Start development server with all services"
run = "cd backend && composer run dev"

[tasks.dev-ssr]
description = "Start development server with SSR support"
run = "cd backend && composer run dev:ssr"

[tasks.build]
description = "Build for production"
run = "cd frontend && npm run build"

[tasks.build-ssr]
description = "Build for production with SSR"
run = "cd frontend && npm run build:ssr"

[tasks.lint]
description = "Run ESLint with auto-fix"
run = "cd frontend && npm run lint"

[tasks.format]
description = "Format code with Prettier"
run = "cd frontend && npm run format"

[tasks.format-php]
description = "Format PHP code with Pint"
run = "cd backend && ./vendor/bin/pint"

[tasks.test]
description = "Run PHP tests"
run = "cd backend && composer run test"

[tasks.migrate]
description = "Run database migrations"
run = "cd backend && php artisan migrate"

[tasks.fresh]
description = "Fresh migrate with seeding"
run = "cd backend && php artisan migrate:fresh --seed"

[tasks.queue]
description = "Start queue worker"
run = "cd backend && php artisan queue:listen"

[tasks.logs]
description = "Watch real-time logs"
run = "cd backend && php artisan pail"

[tasks.serve]
description = "Start Laravel development server"
run = "cd backend && php artisan serve"

[tasks.vite]
description = "Start Vite development server"
run = "cd frontend && npm run dev"

[tasks.psql]
description = "Connect to PostgreSQL container"
run = "docker exec -it kaimemo2_postgres psql -U kaimemo2_user -d kaimemo2"
